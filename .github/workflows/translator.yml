name: translator

on: [push]

jobs:
  translate-typecheck:
    runs-on: ubuntu-22.04

    steps:
    - uses: actions/checkout@v2

    - name: Install PVS
      run: tools/setup-pvs.sh
      shell: sh

    - name: Install personoj
      run: ~/pvs-7.1.0/pvs -raw -L tools/personoj.lisp

    - name: translate and compare
      run: |
        cd tests/thy_translation || exit 1
        ~/pvs-7.1.0/pvs -raw -L test.lisp -E '(runall :non-interactive-p t)' -E '(uiop:quit)'
